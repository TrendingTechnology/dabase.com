Set up <https://aws.amazon.com/ses/> with a [verified
email](http://s.natalian.org/2015-11-10/1447139043_1150x1058.png) so that it
can send as that address and only to that address.

I tested both **ssmtp* and **mstmp** !

# /etc/ssmtp/ssmtp.conf

	root=foo@example.com
	FromLineOverride=NO
	mailhub=email-smtp.us-west-2.amazonaws.com:587
	AuthUser=AKIAINSHZHYMQYHXD4FQ
	AuthPass=secret
	UseSTARTTLS=yes
	UseTLS=YES
	TLS_CA_File=/etc/pki/tls/certs/ca-bundle.crt
	AuthMethod=LOGIN
	Debug=YES

# /etc/msmtprc

	defaults
	tls on
	tls_starttls on
	tls_trust_file /etc/ssl/certs/ca-bundle.crt
	account default
	host email-smtp.us-west-2.amazonaws.com
	port 587
	auth on
	user AKIAINSHZHYMQYHXD4FQ
	password secret
	from foo@example.com

# Workaround write your own /usr/sbin/sendmail

When you get:

	[root@rojak ssmtp]# send-mail: 554 Transaction failed: Missing final '@domain'
	ssmtp: 554 Message rejected: Email address is not verified.

	send-mail: server message: 554 Transaction failed: Missing final '@domain'
	send-mail: could not send mail (account default from /etc/msmtprc)


If you use msmtp:

	v=foo@example.com # aws ses verified email
	cat | /usr/bin/msmtp -i -- $v

I recommend msmtp since the revaliases is just:

	# cat /etc/msmtp-aliases
	default: foo@example.com

If you use ssmtp:

	cat | /usr/sbin/ssmtp -i -- $v
