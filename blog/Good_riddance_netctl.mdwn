For the last year Archlinux has been recommending users to use
[netctl](https://wiki.archlinux.org/index.php/Netctl) to configure their
network interfaces.

Netctl's ethernet-dhcp worked well, but not the wireless interface management
which never made sense to me.

Upstream's Jouke Witteveen is
[sadly](https://github.com/joukewitteveen/netctl/issues/66)
[unhelpful](https://github.com/joukewitteveen/netctl/issues/81) despite my
cries for help.

So on the back of systemd's (>210) **systemd-networkd**, which I [previously blogged about when
configuring my Droplet](http://dabase.com/blog/Systemd_network_on_a_Droplet/),
I now have:

	$ cat /etc/systemd/network/eth0.network
	[Match]
	Name=eth0
	[Network]
	DHCP=yes

Via `journalctl -u systemd-networkd.service -f` this seems to be able to detect
the carrier is on or off **without** ifplugd. Nice!

For your DNS nameservers, you need to symlink /etc/resolv.conf to `/run/systemd/network/resolv.conf`

	etc$ sudo ln -s /run/systemd/network/resolv.conf

## Wireless

To do all the WPA authentication stuff:

	sudo systemctl enable wpa_supplicant@wlan0.service

You need to make sure /etc/wpa_supplicant/wpa_supplicant-wlan0.conf is in
place, as you can see in `/usr/lib/systemd/system/wpa_supplicant@.service`. I
prefer to link in `/etc/wpa_supplicant.conf` where I've also stored my wireless
passwords and things.

	/etc/wpa_supplicant$ sudo ln -s /etc/wpa_supplicant.conf wpa_supplicant-wlan0.conf

Now to get the IP address, we use **systemd-networkd**, with the configuration:

	$ cat /etc/systemd/network/wlan0.network
	[Match]
	Name=wlan0
	[Network]
	DHCP=yes

## TODO

When wired network is plugged in (carrier on), disable wireless and use wired.
Currently I manually turn off wifi using my Thinkpad's switch, which is fine
really.

Acknowledgements: [WonderWoofy on the the Archlinux
forums](https://bbs.archlinux.org/viewtopic.php?pid=1393759#p1393759)
